# Git Learn

## 1. 什么是Git

### 1-1. 定义

git是一个**分布式 版本控制**软件。

> **分布式**：可以指定和若干不同的远端代码仓库进行交互，以便 在同一项目中 和不同的人相互协作。
> **版本控制**：记录一个或若干文件内容变化，以便 将来查阅特定版本修订情况。

### 1-2. 特点

- 1. 直接记录快照，而非差异比较

> 实质：git关心文件的**整体性**是否有改变, 而不在乎文件内容的差异（即 而非存储每个文件与初始版本的差异）。

> 这种方式的好处： 分支的创建和销毁很高效。因创建一个新分支仅相当于往一个文件中写入41个字符，而存储差异方式相当于 CV所有开发文件到新分支。

- 2. 近乎所有操作都是本地执行

> 原因：项目的完整历史存储在本地数据库中

- 3. 保证完整性

> 白话文：不可能在 Git 不知情时更改任何文件内容或目录内容。

> 底层机制：Git 中所有的数据在存储前都使用 **SHA-1 散列**（hash，哈希）计算**校验和**，然后以校验和来引用。

> 校验和：由 **40 个十六进制字符**（0-9 和 a-f）组成的字符串，基于 Git 中文件的**内容**计算出来，用于Git数据库的索引。

- 4. 一般只添加数据

> 白话文：一旦提交快照到 Git 中， 就难以再丢失数据。很难让Git清除数据。

## 2. Git内存空间

### 2-1. 文件类型

### 2-2. 内存划分

划分为了**三个**区域，分别是

| 区域        | 价格    |  数量  |
| --------   | -----:   | :----: |
| 香蕉        | $1      |   5    |
| 苹果        | $1      |   6    |
| 草莓        | $1      |   7    |

### 2-3. 文件状态












> git和其他版本控制系统（如CVS）有不小的差别，git本身关心文件的整体性是否有改变，但多数的版本控制系统如CVS或Subversion系统则在乎文件内容的差异。git拒绝保持每个文件的版本修订关系。因此查看一个文件的历史需要遍历各个history快照；git隐式处理文件更名，即同名文件默认为其前身，如果没有同名文件则在前一个版本中搜索具有类似内容的文件。
> git存储每个新创建的object作为一个单独文件。为了压缩存储空间占用， packs操作把很多文件（启发式类似名字的文件往往具有类似内容）使用差分压缩入一个文件中（packfile），并创建一个对应的索引文件，指明object在packfile中的偏移值。新创建的对象仍然作为单独文件存在。repacks操作非常费时间，git会在空闲时间自动做此操作。也可用命令git gc来直接启动repack。packfile与索引文件都用SHA-1作为校验和并作为文件名。git fsck命令做校验和的完整性验证。
> Git 的分支实质上仅是包含所指对象校验和（长度为 40 的 SHA-1 值字符串）的文件，所以它的创建和销毁都异常高效。 创建一个新分支就相当于往一个文件中写入 41 个字节（40 个字符和 1 个换行符），如此的简单能不快吗？